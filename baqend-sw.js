/* ! speed-kit 1.18.0 | Copyright (c) 2019 Baqend GmbH */
"use strict";const t="accept",e=`${t}-language`,s="content-language",i="content-type";function r(t){const e=t.lastIndexOf(".");return-1===e||t.lastIndexOf("/")>e?"":t.substr(e).toLowerCase()}var n;function a(e){const s=function(t){for(const e of Object.values(n))if(e===t)return e;return n.Undefined}(e.destination||"");if(s!==n.Undefined)return e.url,s;const i=function(t){const e=[];return t&&"*/*"!==t?((t.includes("text/html")||t.includes("application/xhtml+xml"))&&e.push(n.Document),t.includes("text/css")&&e.push(n.Style),(t.includes("text/javascript")||t.includes("application/javascript")||t.includes("application/wasm"))&&e.push(n.Script),t.includes("image/")&&e.push(n.Image),t.includes("font/")&&e.push(n.Font),t.includes("video/")&&e.push(n.Video),t.includes("audio/")&&e.push(n.Audio),t.includes("text/vtt")&&e.push(n.Track),1===e.length?e[0]:n.Undefined):n.Undefined}(e.headers.get(t)||"");if(i!==n.Undefined)return e.url,i;if("navigate"===e.mode)return n.Document;const{pathname:a}=new URL(e.url),o=function(t){switch(t){case".js":case".mjs":case".wasm":case".wast":return n.Script;case".html":case".htm":return n.Document;case".css":return n.Style;case".woff2":case".woff":case".ttf":case".otf":case".eot":return n.Font;case".mp3":case".wav":return n.Audio;case".vtt":return n.Track;case".png":case".jpeg":case".jpg":case".gif":case".svg":case".ico":case".webp":return n.Image;case".mp4":case".ogg":case".ogv":case".webm":return n.Video;default:return n.Undefined}}(r(a));return o!==n.Undefined?(e.url,o):a.endsWith("/")?n.Document:n.Undefined}!function(t){t.Document="document",t.Audio="audio",t.Video="video",t.Track="track",t.Image="image",t.Style="style",t.Script="script",t.Font="font",t.Undefined="undefined"}(n||(n={}));const o=[n.Document,n.Script,n.Style,n.Undefined];function c(t,e){const s=t.contentType,i=new URL(t.originalRequest.url);return!e&&s===n.Script||!function(t,e){const{pathname:s}=t,i=".svg"===r(s);return o.includes(e)||i}(i,s)}function h(t,e){var s={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(s[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&(s[i[r]]=t[i[r]])}return s}function l(t,e,s,i){var r,n=arguments.length,a=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,s,i);else for(var o=t.length-1;o>=0;o--)(r=t[o])&&(a=(n<3?r(a):n>3?r(e,s,a):r(e,s))||a);return n>3&&a&&Object.defineProperty(e,s,a),a}const u=new Map;class d{constructor(t,e){this.clientId=t,this.url=e}static fromClientID(t){const e=u.get(t);if(!e){const e=clients.get(t),s=new d(t,e.then(t=>new URL(t.url)));return u.set(t,s),s}return e}static fromNavigateURL(t){return new d("",Promise.resolve(new URL(t)))}}function p(t){return[].concat(t)}function m(t,...e){return"number"==typeof t&&Number.isNaN(t)?function(t){for(const e of t)if("number"==typeof e&&Number.isNaN(e))return!0;return!1}(e):e.indexOf(t)>=0}const g=[240,375,576,768,992,1200,1920,2560,3840];function f(t){return g.find(e=>t<=e)||t}function w(t){if(t.clientHintWidth)return new Map([["width",`${f(t.clientHintWidth)}`]]);if(!t.downscale)return new Map;if(t.maxHeight)return new Map([["height",`${t.maxHeight}`]]);const e=function(t){const{screenWidth:e,screenDPR:s}=t;return f(e*(s*(t.screenSizeFactor||1)))}(t),s=t.maxWidth?t.maxWidth:e;return isFinite(s)&&s>0?new Map([["width",`${s}`]]):new Map}function v(t,e){const s=3&e.length,i=e.length-s,r=3432918353,n=461845907;let a,o,c,h;for(a=t,h=0;h<i;)c=255&e.charCodeAt(h)|(255&e.charCodeAt(h+=1))<<8|(255&e.charCodeAt(h+=1))<<16|(255&e.charCodeAt(h+=1))<<24,h+=1,a=27492+(65535&(o=5*(65535&(a=(a^=c=(65535&(c=(c=(65535&c)*r+(((c>>>16)*r&65535)<<16)&4294967295)<<15|c>>>17))*n+(((c>>>16)*n&65535)<<16)&4294967295)<<13|a>>>19))+((5*(a>>>16)&65535)<<16)&4294967295))+((58964+(o>>>16)&65535)<<16);switch(c=0,s){case 3:c^=(255&e.charCodeAt(h+2))<<16;case 2:c^=(255&e.charCodeAt(h+1))<<8;case 1:a^=c=(65535&(c=(c=(65535&(c^=255&e.charCodeAt(h)))*r+(((c>>>16)*r&65535)<<16)&4294967295)<<15|c>>>17))*n+(((c>>>16)*n&65535)<<16)&4294967295}return a^=e.length,a=2246822507*(65535&(a^=a>>>16))+((2246822507*(a>>>16)&65535)<<16)&4294967295,a=3266489909*(65535&(a^=a>>>13))+((3266489909*(a>>>16)&65535)<<16)&4294967295,(a^=a>>>16)>>>0}function A(t){const e=Array.from(t).map(t=>String.fromCharCode(t)).join("");return btoa(e).replace(/(?:A(?:AAA|AA=|A==))+$/,"")}class y{constructor(t,e,s){this.AS=t,this.AT=e,this.AU=s}static fromJSON(t){return new y((e=t.b,Uint8Array.from([...atob(e)].map(t=>t.charCodeAt(0)))),t.m,t.h);var e}contains(t){return this.AQ(t).every(t=>this.AR(t))}toJSON(){return{b:A(this.AS),m:this.AT,h:this.AU}}AQ(t){const e=[],s=v(0,t),i=v(s,t);for(let t=0;t<this.AU;t+=1)e[t]=(s+t*i)%this.AT;return e}AR(t){const e=this.AS[t>>3];if(e){return 0!=(e&1<<(7&t))}return!1}}var b;!function(t){t[t.OK=200]="OK",t[t.BaqendRedirect=231]="BaqendRedirect",t[t.MovedPermanently=301]="MovedPermanently",t[t.MovedTemporarily=302]="MovedTemporarily",t[t.BadRequest=400]="BadRequest",t[t.Forbidden=403]="Forbidden",t[t.InternalServerError=500]="InternalServerError",t[t.BadGateway=502]="BadGateway",t[t.FetchTypeError=542]="FetchTypeError"}(b||(b={}));const R="baqend-speedkit",B=`${R}-store`,S="default",O="baqend-speed-kit",N="bqpassthrough";function k(t){const e=t.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];let s=null;if(/trident/i.test(e[1]))return s=/\brv[ :]+(\d+)/g.exec(t)||[],["IE",parseInt(s[1],10)||0];if("Chrome"===e[1]){if(null!=(s=t.match(/\bEdge\/(\d+)/)))return["Edge",parseInt(s[1],10)];if(null!=(s=t.match(/\bOPR\/(\d+)/)))return["Opera",parseInt(s[1],10)]}const i=e[2]?[e[1],parseInt(e[2],10)]:[navigator.appName,parseInt(navigator.appVersion,10)];return-1===t.indexOf("Android")&&null!=(s=t.match(/version\/(\d+)/i))&&i.splice(1,1,parseInt(s[1],10)),i}function E(t){return new Promise(e=>setTimeout(e,t))}function q(t){const[e]=k(navigator.userAgent);return"Safari"===e?async function t(e){const s=Date.now();if(e<10)return;if(e<500)return E(e);await E(500);const i=Date.now()-s;return t(e-i)}(t):E(t)}function x(t=null){if(!t)return new Map;const e=t.split(";").map(t=>t.split("=",2));return new Map(e)}function I(t){const e=t.headers.get("date")||"";return Date.parse(e)}class P{constructor(t){this.public=t.has("public"),this.private=t.has("private"),this.noCache=t.has("no-cache"),this.onlyIfCached=t.has("only-if-cached"),this.maxAge=t.get("max-age"),this.swMaxAge=t.get("sw-max-age"),this.maxStale=t.get("max-stale"),this.minFresh=t.get("min-fresh"),this.staleWhileRevalidate=t.get("stale-while-revalidate"),this.staleIfError=t.get("stale-if-error"),this.mustRevalidate=t.has("must-revalidate"),this.proxyRevalidate=t.has("proxy-revalidate"),this.immutable=t.has("immutable"),this.noStore=t.has("no-store"),this.noTransform=t.has("no-transform")}static fromString(t){const e=t.split(/,\s*/).map(t=>t.split("=",2)).map(([t,e])=>[t,e?parseInt(e,10):-1]),s=new Map(e);return new P(s)}}function C(t,e){return P.fromString(t.headers.get(e)||"")}function D(t,e){const s=C(t,"cache-control"),i=C(t,"baqend-sw-control"),r=function(...t){for(const e of t)if(null!=e)return e;return null}(s.swMaxAge,i.maxAge,s.maxAge);if(t.headers.has("date")&&null!=r){const s=function(t,e,s=0){const i=t.headers.get(e);return null==i?s:parseInt(i,10)}(t,"age"),i=I(t)+e,n=(new Date(i-e),i+1e3*(r-s));return Date.now(),Date.now()>n}return null}async function L(t,e,s){const r=e.headers.get(i);if(!r.startsWith("application/json"))throw new Error(`Weird server reply: ${r}`);const n=await e.json();t.clearRevalidationWhitelist(),t.update(Object.assign({},s,{body:n}))}class T{constructor(t,e){this.urls=t,this.contentTypes=e,this.urlRegExp=function(t){const e=[];if(t&&e.push(...[...t].map(t=>`^${function(t){return t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}(t).replace(/\\\*/g,".*")}$`)),e.length)return new RegExp(e.join("|"))}(t)}static fromJSON(t){const e=t=>{if(t&&t.length)return new Set(t)};return new T(e(t.urls),e(t.contentTypes))}match(t,e){let s=!0;return this.contentTypes&&e!==n.Undefined&&(s=s&&this.contentTypes.has(e)),this.urlRegExp&&(s=s&&!!t.match(this.urlRegExp)),s}toJSON(){const t=t=>{if(t)return[...t]};return{urls:t(this.urls),contentTypes:t(this.contentTypes)}}}function U(t){return function(e){return class extends e{async handle(e,s,i){if(!this.EG(s))return!1;const{type:r}=s,n=h(s,["type"]);return t===r&&super.handle(e,n,i)}EG(t){return!!t&&"object"==typeof t&&"string"==typeof t.type}}}}function H(t){return function(e){return class extends e{cachePath(){return t}}}}function*J(t,e){for(const s of t)yield*e(s)}class M{constructor(t){if(this[Symbol.toStringTag]="MultiMap",this.EB=new Map,t)for(const[e,s]of t)this.EB.has(e)?this.EB.get(e).add(s):this.EB.set(e,new Set([s]))}get size(){return t=this.values(),[...t].length;var t}[Symbol.iterator](){return this.entries()}entries(){return J(this.EB.entries(),([t,e])=>(function*(t,e){for(const s of t)yield e(s)})(e,e=>[t,e]))}keys(){return this.EB.keys()}values(){return J(this.EB.values(),t=>t.keys())}clear(){this.EB.clear()}delete(t){return this.EB.delete(t)}forEach(t,e){for(const[s,i]of this.entries())t.call(e,i,s,this)}map(t,e){return new M([...this.entries()].map(([s,i])=>t.call(e,i,s,this)))}filter(t,e){return new M([...this.entries()].filter(([s,i])=>t.call(e,i,s,this)))}filterKey(t,e){return new M([...this.entries()].filter(([s])=>t.call(e,s,this)))}getAll(t){const e=this.EB.get(t);if(!e){const e=new Set;return this.EB.set(t,e),e}return e}get(t){return function(t){const[e]=t;return e}(this.getAll(t))}has(t){return this.EB.has(t)}add(t,e){return this.getAll(t).add(e),this}set(t,e){const s=this.getAll(t);return s.clear(),s.add(e),this}setAll(t,e){const s=this.getAll(t);s.clear();for(const t of e)s.add(t);return this}}class W{constructor(){this.B9=[]}observe(t){this.B9.push(t)}notify(){for(const t of this.B9)t()}}let F=class extends W{constructor(t){super(),this.revalidationWhitelist=new Set,this.refreshJobs=new M,this.B1=0,this.B2=S,this.B3=null,this.B0=t}addToRevalidationWhitelist(t){this.revalidationWhitelist.add(t)}clearRevalidationWhitelist(){this.revalidationWhitelist.clear()}isExpired(){return null==this.maxAge||this.maxAge<Date.now()}isInvalid(){if(null==this.maxAge)return!0;const t=this.B0.staleWhileRevalidate,e=this.maxAge+t<=Date.now();return this.maxAge,Date.now(),e}isRequestStale(t){return!this.revalidationWhitelist.has(t)&&(!this.bloomFilter||this.bloomFilter.contains(t))}isResponseStale(t,e,s){const i=I(s),r=this.refreshJobs.filterKey(t=>t.getTime()>=i);for(const s of r.values())if(s.match(t,e))return JSON.stringify(s.toJSON()),!0;return!1}getDrift(){return this.B1}getClientRevision(){return this.B2}getServerRevision(){return this.B3}update(t){void 0!==t.body&&this.Bz(t.body),void 0!==t.maxAge&&(this.maxAge=t.maxAge),void 0!==t.drift&&(this.B1=t.drift),void 0!==t.clientRevision&&(this.B2=t.clientRevision),void 0!==t.serverRevision&&(this.B3=t.serverRevision),this.notify()}purge(){this.bloomFilter=void 0,this.maxAge=void 0,this.revalidationWhitelist.clear(),this.notify()}isInitialized(){return void 0!==this.bloomFilter&&void 0!==this.maxAge}toJSON(){return{maxAge:this.maxAge,body:this.Bx(),drift:this.B1,clientRevision:this.B2,serverRevision:this.B3}}fromJSON(t){this.B1=t.drift,this.Bz(t.body),t.maxAge&&(this.maxAge=t.maxAge),void 0!==t.clientRevision&&(this.B2=t.clientRevision),void 0!==t.serverRevision&&(this.B3=t.serverRevision)}Bx(){if(!this.bloomFilter)return;const t=this.By();return Object.assign({},this.bloomFilter.toJSON(),{r:t})}By(){if(this.refreshJobs.size)return[...this.refreshJobs.map((t,e)=>[e.getTime(),t.toJSON()])]}Bz(t){if(this.refreshJobs.clear(),t&&(this.bloomFilter=y.fromJSON(t),t.r))for(const[e,s]of t.r)this.refreshJobs.add(new Date(e),T.fromJSON(s))}};F=l([H("/com.baqend.speedkit.clock")],F);class ${constructor(t=""){this.B4=new Map,t&&this.fromString(t)}clear(){this.B4.clear()}fromString(t){this.clear();const e=t.trim();if(!e)return;const s=e.split(/\s*;\s+/);for(const t of s){const[e,s]=t.split(/\s*=\s*/,2);this.B4.set(e,s)}}toString(){return[...this.B4].map(([t,e])=>`${t}=${e}`).join("; ")}getItem(t){return this.B4.get(t)}keys(){return this.B4.keys()}entries(){return this.B4.entries()}}let j=class extends W{constructor(){super(),this.B5=new Map}getCookies(t){return this.B5.get(t)||new $}updateCookies(t,e){this.B5.set(t,new $(e)),this.notify()}toJSON(){return{origins:[...this.B5].map(([t,e])=>[t,e.toString()])}}fromJSON(t){if("string"==typeof t)return this.fromJSON({origins:[[location.origin,t]]}),void this.notify();const{origins:e}=t;this.B5.clear();for(const[t,s]of e)this.B5.set(t,new $(s));this.B5}};j=l([H("/com.baqend.speedkit.cookie")],j);let z=class extends W{isFirstLoadHandled(){return void 0===this.firstLoad||this.firstLoad}firstLoadHandled(){this.firstLoad=!1,this.notify()}toJSON(){return{firstLoad:this.firstLoad}}fromJSON(t){this.firstLoad=t.firstLoad}};function G(t){if("string"!=typeof t)return null;const e=/^regexp:\/(.*)\/([\w]*)$/.exec(t);if(e){const[,t,s]=e;return new RegExp(t,s)}return null}function K(t){return JSON.parse(t,(t,e)=>"string"==typeof e&&G(e)||e)}z=l([H("/com.baqend.speedkit.load")],z);let _=class extends W{constructor(){super(...arguments),this.dpr=1,this.width=1/0}fromJSON(t){this.dpr=t.dpr||1,this.width=t.width||1/0}toJSON(){return{dpr:this.dpr,width:this.width}}};function Q(t,...e){const s=t.toLowerCase();return e.some(t=>"string"==typeof t?s.includes(t):t.test(s))}_=l([H("/com.baqend.speedkit.screen")],_);const V=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(?:browser|link)|vodafone|wap|windows ce|xda|xiino/,X=/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br[ev]w|bumb|bw\-[nu]|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c[- ]|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/;function Y(t){return Q(t,"tablet","ipad","nexus 7","nexus 10","silk/",/\bgt-[pn]\d{4}\b/)}function Z(t){return Q(t,"appletv","apple tv","googletv","crkey","armv7l","aftt","aftm","roku","bravia","philipstv","tsbnettv","smarttv",/\btv\b/)}function tt(t,e){if(!e)return t.toString();try{return new URL(e).toString()}catch(s){if(e.startsWith("//"))return`${t.protocol}${e}`;if(e.startsWith("/"))return`${t.origin}${e}`;const i=function t(e){return e.startsWith("/")?t(e.substr(1)):e}(t.pathname).split("/"),r=e.split("/");i.pop();for(const t of r)".."===t?i.pop():"."===t||i.push(t);return`${t.origin}/${i.join("/")}`}}class et{}et.propName="";class st extends et{constructor(t=[]){super(),this.EH=t}matches(t,e){return!!this.EH.length&&this.EH.every(s=>s.matches(t,e))}toJSON(){const t={};for(const e of this.EH){t[e.constructor.propName]=e.toJSON()}return t}fromJSON(t){if("string"==typeof t)return this.fromJSON(K(t));for(const[e,s]of Object.entries(t)){if(!wt[e])throw new Error(`Illegal rule: ${e}`);{const t=new wt[e];t.fromJSON(s),this.addCondition(t)}}return this}addCondition(t){return this.EH.push(t)}removeCondition(t){const e=this.EH.indexOf(t);return!(e<0)&&(this.EH.splice(e,1),!0)}}function it(t,e){return e instanceof Array?e.some(e=>it(t,e)):e instanceof RegExp?e.test(t):t.startsWith(e)}class rt extends et{constructor(t=[]){super(),this.EI=t}matches(t,e){if(!this.EI.length)return!1;const s=a(t),i=this.EI.includes(s);return i}toJSON(){return this.EI}fromJSON(t){if("string"==typeof t)return this.fromJSON(K(t));if(t instanceof Array)return this.EI=t,this;throw new Error("Invalid ContentTypeCondition JSON")}}rt.propName="contentType";class nt extends et{constructor(t){super(),this.EO=t}test(t){return null!=this.EO&&it(t,this.EO)}toJSON(){return this.EO?function t(e){return e instanceof Array?e.map(e=>t(e)):e instanceof RegExp?`regexp:/${(s=e).source}/${s.flags||""}`:e;var s}(this.EO):null}fromJSON(t){if(null==t||"null"===t)return this.EO=null,this;try{return this.fromJSON(K(t))}catch(t){}return this.EO=t,this}}class at extends nt{matches(t,e){if(!e)return!1;if(!t.url.startsWith(location.origin))return location.origin,!1;const s=[...e.entries()].some(t=>this.test(`${t[0]}=${t[1]}`));return s}}at.propName="cookie";class ot extends et{matches(t,e){const s=t.headers.get("user-agent")||navigator.userAgent;return!s||(this.constructor.name,this.userAgentMatches(s),this.userAgentMatches(s))}toJSON(){return!0}fromJSON(t){return this}}class ct extends ot{userAgentMatches(t){return function(t){return Q(t,"wow64","windows nt","win64","msie","macintosh;","linux x86_64")}(t)}}function ht(t){const[,e,s,i,r,n,a]=/^(?:(https?:)\/\/)?(([\w.-]+)(?::(\d+))?)([^#]*)(#.*)?$/.exec(t);return{protocol:e,host:s,hostname:i,port:r,pathname:n,hash:a}}ct.propName="desktop";class lt extends nt{matches(t,e){return this.test(ht(t.url).host)}}lt.propName="host";class ut extends ot{userAgentMatches(t){return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(?:browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br[ev]w|bumb|bw\-[nu]|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c[- ]|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4))}}ut.propName="mobile";class dt extends nt{matches(t,e){return this.test(ht(t.url).pathname)}}dt.propName="pathname";class pt extends et{constructor(t=[]){super(),this.EJ=t}get size(){return this.EJ.length}toJSON(){return this.EJ.map(t=>t.toJSON())}fromJSON(t){if(t instanceof Array)return this.EJ=t.map(t=>(new st).fromJSON(t)),this;throw new Error("Invalid RuleSet JSON")}matches(t,e){return this.EJ.some(s=>s.matches(t,e))}[Symbol.iterator](){return this.EJ[Symbol.iterator]()}addRule(t){return this.EJ.push(t)}removeRule(t){const e=this.EJ.indexOf(t);return!(e<0)&&(this.EJ.splice(e,1),!0)}}class mt extends ot{userAgentMatches(t){return Y(t)}}mt.propName="tablet";class gt extends ot{userAgentMatches(t){return Z(t)}}gt.propName="tv";class ft extends nt{matches(t,e){return this.test(function(t){const[,e]=/^(?:(?:\w+?:)?\/\/)?(.*)$/.exec(t);return e}(t.url))}}ft.propName="url";const wt={[rt.propName]:rt,[at.propName]:at,[ct.propName]:ct,[lt.propName]:lt,[ut.propName]:ut,[dt.propName]:dt,[mt.propName]:mt,[gt.propName]:gt,[ft.propName]:ft};var vt,At;!function(t){t.LOAD="load",t.SPEED_KIT_DYNAMIC_LOADED="speed-kit-dynamic-loaded"}(vt||(vt={}));const yt=2;let bt=At=class extends W{constructor(t){super(),this.CA=null,this.CB=null,this.CC=!0,this.properties=At.getDefaults(),this.B_=t}get appURL(){if(!this.optionalAppURL)throw new Error("Options are not initialized yet.");return this.optionalAppURL}get reconnectInterval(){return this.properties.reconnectInterval}get refreshInterval(){return 1e3*this.properties.refreshInterval}get relativeModuleImports(){return this.properties.relativeModuleImports}get staleWhileRevalidate(){return 1e3*this.properties.staleWhileRevalidate}get preloadBloomFilter(){return this.properties.preloadBloomFilter}get navigationPreload(){return this.properties.navigationPreload}get cachingDisabled(){return this.properties.disableCache}get preloadDynamicBlocks(){return this.properties.preloadDynamicBlocks}get sdnSetup(){return this.properties.sdnSetup}shouldCacheRequest(t,e=!1){const{request:s,cookies:i}=t;return!this.properties.disableCache&&(!(this.properties.whitelist.size&&!this.properties.whitelist.matches(s,i))&&(!this.properties.blacklist.matches(s,i)&&(!!e||(this.properties.enabledSites.size&&t.isNavigateRequest()&&(this.CC=this.properties.enabledSites.matches(s,i)),this.CC))))}shouldDelayRequest(t){const e=this.properties.delayed.some(e=>e.rules.matches(t.request,t.cookies)),s=a(t.request),i=[n.Script,n.Image];return e&&!!s&&i.includes(s)}async isEnabledOnSite(t){return!!t.isNavigateRequest()||this.B$(t,this.properties.enabledSites)}isEnabledOnURL(t,e=this.properties.enabledSites){if(!e.size)return!0;const s=e.matches(new Request(t.toString()));return s}async B$(t,e){return!e||!e.size||(t.isNavigateRequest()?e.matches(t.originalRequest,t.cookies):this.isEnabledOnURL(await t.navigation.url,e))}getUserAgentClass(t){if(!this.properties.userAgentDetection||!this.properties.userAgentDetection.matches(t))return null;const e=t.headers.get("user-agent")||navigator.userAgent||navigator.vendor,s="navigate"===t.mode&&e!==this.CB;return null==this.CA||s?(this.CB=e,Q(i=e,V)||Q(i.substr(0,4),X)?this.CA="mobile":Y(e)?this.CA="tablet":this.CA=Z(e)?"tv":"desktop"):this.CA;var i}async shouldFetchOrigin(t){if(-1===this.properties.fetchOriginInterval)return!1;if(0===this.properties.fetchOriginInterval)return!0;const e=Math.floor(Date.now()/1e3);if((await this.B_.get("/fetch-origin-time")||e)<=e){const t=e+this.properties.fetchOriginInterval+yt;return await this.B_.set("/fetch-origin-time",t),!0}return!1}getDelayOptions(t){const e=At.getDelayDefaults();for(const s of this.properties.delayed){(!s.rules||s.rules.matches(t.originalRequest))&&(s.options,Object.assign(e,s.options))}return e}async getImageOptions(t){const e=At.getImageDefaults();if(this.properties.image instanceof Array){for(const s of this.properties.image){if(!s.rules||s.rules.matches(t.originalRequest)){await this.B$(t,s.enabledSites)&&(s.options,Object.assign(e,s.options))}}return e}return Object.assign(e,this.properties.image)}shouldStripQueryParameter(t,e){return!!this.properties.stripQueryParams.length&&it(t,e)}async getQueryParameterStripConditions(t){let e=[];for(const s of this.properties.stripQueryParams){if(!s.rules||s.rules.matches(t.originalRequest)){(!s.enabledSites||await this.B$(t,s.enabledSites))&&(e=e.concat(s.params))}}return e}hasCriticalResources(){return!!this.properties.criticalResources.length}async getCriticalResources(t){const e=[];for(const{enabledOn:s,resources:i}of this.properties.criticalResources)await this.B$(t,s)&&e.push(...i);return e.filter((t,s)=>e.indexOf(t)===s)}getSplitTestId(){return this.properties.splitTestId}getGroup(){return this.properties.group}toJSON(){const t=this.properties.delayed.map(t=>({options:t.options,rules:t.rules.toJSON()})),e=this.properties.image instanceof Array?this.properties.image.map(t=>({options:t.options,enabledSites:t.enabledSites&&t.enabledSites.toJSON(),rules:t.rules&&t.rules.toJSON()})):this.properties.image,s=this.properties.criticalResources.map(t=>({enabledOn:t.enabledOn&&t.enabledOn.toJSON(),resources:t.resources})),i=this.properties.stripQueryParams.map(t=>({enabledSites:t.enabledSites&&t.enabledSites.toJSON(),rules:t.rules&&t.rules.toJSON(),params:t.params})),r=new URL(this.appURL);let n,a="local";return r.host.endsWith(".app.baqend.com")?a=r.host.substring(r.host.length-".app.baqend.com".length):n=r.host,{appName:a,appDomain:n,delayed:t,image:e,criticalResources:s,stripQueryParams:i,splitTestId:this.properties.splitTestId,group:this.properties.group,blacklist:this.properties.blacklist.toJSON(),whitelist:this.properties.whitelist.toJSON(),enabledSites:this.properties.enabledSites.toJSON(),disableCache:this.properties.disableCache,userAgentDetection:this.properties.userAgentDetection.toJSON(),fetchOriginInterval:this.properties.fetchOriginInterval,preloadBloomFilter:this.properties.preloadBloomFilter,navigationPreload:this.properties.navigationPreload,reconnectInterval:this.properties.reconnectInterval,refreshInterval:this.properties.refreshInterval,staleWhileRevalidate:this.properties.staleWhileRevalidate}}fromJSON(t){const{sw:e,scope:s,disabled:i}=t,r=h(t,["sw","scope","disabled"]),{appName:n,appDomain:a}=r,o=h(r,["appName","appDomain"]);this.optionalAppURL=`https://${a||`${n}.app.baqend.com`}/v1`,this.optionalAppURL;const c=At.getDefaults(),{maxStaleness:l,refreshInterval:u}=o,d=h(o,["maxStaleness","refreshInterval"]),p=u||l&&l/1e3||c.refreshInterval,{whitelist:m,blacklist:g,delayed:f,stripQueryParams:w,enabledSites:v,criticalResources:A,image:y,userAgentDetection:b}=d,R=h(d,["whitelist","blacklist","delayed","stripQueryParams","enabledSites","criticalResources","image","userAgentDetection"]);this.properties=Object.assign({},c,{refreshInterval:p,userAgentDetection:this.getUserAgentRuleSet(b||!1),whitelist:(new pt).fromJSON(m||[]),blacklist:(new pt).fromJSON(g||[]),enabledSites:(new pt).fromJSON(v||[]),stripQueryParams:At.initStripParams(w),delayed:At.initDelayed(f),criticalResources:At.initCriticalResources(A),image:At.initImage(y)},R)}getUserAgentRuleSet(t){const e=new pt;return"boolean"==typeof t?t&&e.addRule(new st([new ft("")])):e.fromJSON(t),e}static getDefaults(){return{blacklist:new pt,criticalResources:[],delayed:[{rules:new pt,options:this.getDelayDefaults()}],disableCache:!1,enabledSites:new pt,fetchOriginInterval:-1,image:this.getImageDefaults(),preloadBloomFilter:!0,preloadDynamicBlocks:!1,navigationPreload:!1,reconnectInterval:6e4,refreshInterval:300,relativeModuleImports:!1,sdnSetup:!1,staleWhileRevalidate:1800,stripQueryParams:[],userAgentDetection:new pt,whitelist:new pt,splitTestId:"",group:""}}static getDelayDefaults(){return{event:vt.LOAD,timeout:1e3}}static getImageDefaults(){return{downscale:!0,screenSizeFactor:1,maxWidth:!1,maxHeight:!1,quality:85,webp:!0,pjpeg:!0,crop:!1,overrideWidth:!1,overrideHeight:!1}}static initDelayed(t){return t?t.some(t=>t.hasOwnProperty("rules"))?t.map(t=>({rules:(new pt).fromJSON(t.rules),options:t.options})).reverse():[{rules:(new pt).fromJSON(t),options:this.getDelayDefaults()}]:[{rules:new pt,options:this.getDelayDefaults()}]}static initStripParams(t){if(!t)return[];return t instanceof Array&&t.some(t=>"object"==typeof t&&t.params)?t.map(t=>({enabledSites:t.enabledSites&&(new pt).fromJSON(t.enabledSites),rules:t.rules&&(new pt).fromJSON(t.rules),params:t.params})):[{params:t}]}static initImage(t){return t?t instanceof Array?t.map(t=>({enabledSites:t.enabledSites&&(new pt).fromJSON(t.enabledSites),rules:t.rules&&(new pt).fromJSON(t.rules),options:At.normalizeImageOptions(t.options)})).reverse():At.normalizeImageOptions(t):{}}static normalizeImageOptions(t){return"number"==typeof t.quality?t.quality=Math.max(1,Math.min(100,Math.round(t.quality))):!1===t.quality&&(t.quality=100),t}static initCriticalResources(t=[]){return t.length?t.map(At.makeResourceRule).map(At.normalizeResourceURLs).map(At.instantiateResourceEnabledOn):[]}static makeResourceRule(t){return"string"==typeof t?{resources:[t]}:t}static normalizeResourceURLs({enabledOn:t,resources:e}){const s=new URL(location.href);return{enabledOn:t,resources:e.map(t=>tt(s,t))}}static instantiateResourceEnabledOn({enabledOn:t,resources:e}){return{enabledOn:t&&(new pt).fromJSON(t),resources:e}}};function Rt(t,e){return void 0===t?e:t}bt=At=l([H("/com.baqend.speedkit.config")],bt);class Bt{constructor(t){this.wasCacheHit=!1,this.isFetched=!1,this.dependent=new Set,this.originalRequest=t.request,this.request=t.request,this.AA=t.awaiter,this.navigation=t.navigation,this.cookies=t.cookies,this.$=t.navigateRequest,this._=Rt(t.critical,!1),this.preloadResponse=t.preloadResponse,this.prewarm=Rt(t.prewarm,!1),this.marks=Rt(t.marks,new Map),this.dependsOn=t.dependsOn,this.contentType=t.contentType}static create(t,e={},s=(()=>{})){const i=d.fromNavigateURL(t),{navigation:r=i,cookies:n=new $,critical:o=!1}=e,c=h(e,["navigation","cookies","critical"]),l=new Request(t,c),u="navigate"===e.mode,p=a(l);return new Bt({request:l,navigation:r,cookies:n,critical:o,navigateRequest:u,contentType:p,awaiter:s,prewarm:e.prewarm,marks:e.marks,dependsOn:e.dependsOn})}static fromEvent(t,e=new $){const{request:s,preloadResponse:i}=t,r="navigate"===s.mode,n=r?d.fromNavigateURL(s.url):d.fromClientID(t.clientId),o=a(s);return new Bt({request:s,awaiter:e=>t.waitUntil(e),navigation:n,cookies:e,navigateRequest:r,contentType:o,preloadResponse:i})}createSubRequest(t,e){return Bt.create(t,Object.assign({marks:this.marks},e),this.AA)}waitUntil(...t){this.AA(Promise.all(t))}get url(){return new URL(this.request.url)}get headers(){return new Headers(this.request.headers)}get timings(){if(!this.marks.size)return null;const t=Object.create(null);for(const[e,s]of this.marks)t[e]=s;return t}get original(){return this.originalRequest===this.request}mark(t){this.marks.set(t,Date.now())}isNavigateRequest(){return this.$}isCritical(){return this._}isSameOrigin(){return this.url.origin===location.origin}get modifying(){return"GET"!==this.request.method&&"HEAD"!==this.request.method}set url(r){const n=r.toString();this.url.toString()!==n&&(this.request=function(r,n,a={}){const o=new Headers,c=[t,e,s,i];for(const[t,e]of r.headers)c.includes(t.toLocaleLowerCase())&&o.append(t,e);const h={headers:o,credentials:"omit"};return"navigate"!==r.mode&&(h.mode=r.mode),new Request(n,Object.assign(h,a))}(this.request,n))}set headers(t){this.request=new Request(this.request,{headers:t})}set method(t){this.method!==t&&(this.request=new Request(this.request,{method:t}))}get method(){return this.request.method.toUpperCase()}set mode(t){this.request.mode!==t&&(this.request=new Request(this.request,{mode:t}))}set cache(t){this.request.cache!==t&&(this.request=new Request(this.request,{cache:t}))}markAsFetched(){this.isFetched=!0;for(const t of this.dependent)this.dependent.delete(t),t()}async fetch(){this.mark("fetchStart"),this.dependsOn&&(this.dependsOn,this.dependsOn.isFetched),this.dependsOn&&!this.dependsOn.isFetched&&await new Promise(t=>{this.dependsOn.dependent.add(t)}),this.method,this.url.pathname;const t=fetch(this.request);this.markAsFetched();const e=await t;return this.mark("fetchEnd"),e}async getNavigateUrl(){if(this.isNavigateRequest())return this.originalRequest.url;return(await this.navigation.url).toString()}fetchOriginal(){return this.method,this.url.pathname,fetch(this.originalRequest)}toString(){return this.isSameOrigin()?`${this.method} ${this.url.pathname}`:`${this.method} ${this.url}`}}var St;const Ot=Symbol("State"),Nt=Symbol("Waiters");class kt{constructor(t=""){this[St]=new Map,this[Ot]=t}get state(){return this[Ot]}waitUntil(...t){if(!t.length)throw new TypeError("You must wait for at least one desired state.");return t.indexOf(this.state)>=0?Promise.resolve(this.state):Promise.race(t.map(t=>this.AB(t)))}transition(t){const e=this[Ot];return t===e?e:(this[Ot]=t,this.AC(t),e)}AB(t){return new Promise(e=>{const s=this[Nt].get(t)||[];s.push(e),this[Nt].set(t,s)})}AC(t){const e=this[Nt].get(t)||[];this[Nt].delete(t);for(const s of e)s(t)}}var Et,qt;St=Nt,function(t){t.INSTALLING="installing",t.RUNNING="running",t.FAILED="failed"}(Et||(Et={}));function xt(t,e,s,i){return Promise.resolve(t).then(t=>new Promise((r,n)=>{const a=t.transaction(e,s),o=Promise.resolve(i(a.objectStore(e)));a.oncomplete=(()=>o.then(r)),a.onabort=a.onerror=(()=>n(a.error))}))}function It(t,e,s){return xt(t,e,"readwrite",s)}async function Pt(t,e={}){const s=await t.blob();return new Response(s,e)}!function(t){t[t.FALLBACK=0]="FALLBACK",t[t.CACHE=1]="CACHE",t[t.REROUTE=2]="REROUTE",t[t.NAVIGATION_PRELOAD=3]="NAVIGATION_PRELOAD",t[t.PRELOAD=4]="PRELOAD",t[t.GENERATE=5]="GENERATE",t[t.BAQEND_API_REQUEST=6]="BAQEND_API_REQUEST",t[t.ERROR=7]="ERROR"}(qt||(qt={}));class Ct{constructor(t,e,s){this.kind=t,this.request=e,this.response=s}waitUntil(...t){this.request.waitUntil(...t)}clone(t){return new Ct(this.kind,t,this.response&&this.response.then(t=>t.clone()))}}function Dt(t,e){return t.markAsFetched(),new Ct(qt.FALLBACK,t,e)}function Lt(t,e){if(t.original)throw new TypeError(`The request ${t.url} is not rerouted.`);return new Ct(qt.REROUTE,t,Promise.resolve(e))}function Tt(t,e){return new Ct(qt.BAQEND_API_REQUEST,t,Promise.resolve(e))}function Ut(t,e){return t.wasCacheHit=!0,t.markAsFetched(),new Ct(qt.CACHE,t,Promise.resolve(e))}function Ht(t,e){return t.markAsFetched(),new Ct(qt.PRELOAD,t,e)}function Jt(t,e,s={},i=qt.GENERATE){return t.markAsFetched(),new Ct(i,t,Promise.resolve(new Response(e,s)))}class Mt{}function Wt(t,e,s){const i=new Headers(t.originalRequest.headers);i.set("baqend-speed-kit-request","dynamic"),s&&i.set("baqend-speed-kit-active",e.toString()),t.headers=i}class Ft{constructor(t){this.provider=t}}let $t=class extends Ft{async handle(){return await this.provider.connect(),!0}};$t=l([U("connect")],$t);let jt=class extends Ft{async handle(){return await this.provider.disconnect(),!0}};jt=l([U("disconnect")],jt);let zt=class extends Ft{async handle(){return await this.provider.refreshCacheSketch(!0),!0}};zt=l([U("fetch-bloom-filter")],zt);let Gt=class{constructor(t){this.Bc=t}async handle(t,e,s){const i=e.clientURL;if(!s||!e||!i)return!1;const r=this.Bc.pop(i)||this.Bc.getUnknownNavigateMetadata(i);return s.postMessage(r),!0}};Gt=l([U("get-navigate-info")],Gt);let Kt=class{constructor(t,e,s,i,r){this.Bf=t,this.Bg=e,this.Bh=s,this.Bi=i,this.Bj=r}async handle(t,e){if(!this.Bd(e))return!1;const s=new URL(t.url);return await this.Be(s,e.data),!0}Bd(t){return!!t&&"object"==typeof t&&t.data instanceof Array&&t.data.every(t=>"string"==typeof t.url)}async Be(t,e){if(this.Bf.isEnabledOnURL(t))return;if(!e.length)return;this.Bh.refreshCacheSketch();const s=d.fromNavigateURL(t.toString());for(const{url:i}of e){const e=this.Bi.getCookies(location.origin),r=!0,n=Bt.create(i,{navigation:s,cookies:e,prewarm:r}),a=n.url.origin!==t.origin;if(this.Bf.shouldCacheRequest(n,!0),await this.Bg.loadResponse(n),a&&this.Bf.shouldCacheRequest(n,!0)&&!await this.Bg.loadResponse(n))return void await this.Bj.fetch(n)}}};function _t(t,...e){return"object"==typeof t&&void 0===t.prototype&&e.every(e=>e in t)}Kt=l([U("prewarm-fetch")],Kt);let Qt=class{constructor(t,e,s){this.Bl=t,this.Bm=e,this.Bn=s}async handle(t,e){return!!_t(e,"data")&&(await this.Bk(e.data,_t(e,"event")?e.event:void 0),!0)}async Bk(t,e){"load"===e&&(this.Bm.trackLoadEvent(),2===this.Bm.loadEventCount&&this.Bl.refreshCacheSketch(!0)),this.Bn.updateCookies(location.origin,t)}};Qt=l([U("send-cookies")],Qt);let Vt=class{constructor(t){this.Bo=t}async handle(t){return t.id,this.Bo.release(t.id),!0}};Vt=l([U("dom-ready")],Vt);const Xt={MISS:"MISS",HIT:"HIT","MISS, HIT":"HIT","HIT, MISS":"SHIELD HIT","HIT, HIT":"HIT","MISS, MISS":"MISS"};class Yt{constructor(t){this.D$=null,this.D_=null,this.EA=null;const e=t.get("x-cache"),s=t.get("x-timer"),i=t.get("x-served-by");this.setCache(e),this.setDuration(s),this.setPoP(i)}getDuration(){return this.D_}setDuration(t){if(!t)return void(this.D_=null);const e=t.match(/VS(\d+).*VE(\d+)/);this.D_=null!==e?+e[2]-+e[1]:null}setCache(t){t&&Xt[t]?this.D$=Xt[t]:this.D$=null}getCache(){return this.D$}setPoP(t){if(!t)return void(this.EA=null);const e=t.match(/\w{3}$/);this.EA=null!==e?e[0]:null}getPoP(){return this.EA}}class Zt{constructor(t,e,s,i,r,n,a,o,c,h,l){this.swResponse=!0,this.url=t,this.enabled=e,this.served=s,this.fromOrigin=i,this.cacheHit=r,this.cdnCacheHit=a,this.cdnBackendTime=o,this.cdnPoP=c,this.firstLoad=!1,this.splitTestId=h,this.group=l,[this.browser,this.browserVersion]=k(navigator.userAgent),n&&(this.timings=n)}static fromContext(t,e,s,i,r,n,a){const o=t.request,c=a?new Yt(a.headers):null;return new Zt(o.originalRequest.url,e,s,i,o.wasCacheHit,o.timings,c?c.getCache():null,c?c.getDuration():null,c?c.getPoP():null,r,n)}}const te=new class{constructor(){this.Al=null,this.Al=this.Ak()}get(t){return(e=this.Aj(),s=B,i=(e=>e.get(t)),xt(e,s,"readonly",i)).then(t=>t.result||null);var e,s,i}set(t,e){return It(this.Aj(),B,s=>s.put(e,t)&&void 0)}clear(){return Promise.all([(t=this.Aj(),e=B,It(t,e,t=>t.clear()).then(()=>void 0))]).then(()=>void 0);var t,e}disconnect(){return this.Al?this.Al.then(t=>{this.Al=null,t.close()}):Promise.resolve()}Aj(){return this.Al||(this.Al=this.Ak()),this.Al}Ak(){const t=indexedDB.open(R,1);return t.onupgradeneeded=(e=>{const{oldVersion:s}=e,{result:i}=t;s<1&&i.createObjectStore(B)}),function(t){return new Promise((e,s)=>{t.onsuccess=(()=>e(t.result)),t.onerror=(()=>s(t.error))})}(t).then(t=>(t.onclose=(()=>{this.Al=null}),t.onerror=(()=>{this.Al=null}),t.onversionchange=(e=>{e.newVersion||(this.Al=null,t.close())}),t))}},ee=new class{constructor(t,e,s){this.B8=[],this.B6=t,this.B7=e.open(s)}async store(t){if("function"!=typeof t.cachePath)throw new TypeError("Cannot store an object without cachePath method.");const e=t.cachePath(),s=t.toJSON();await this.B6.set(e,s),location.origin}async load(t,e=!1){if("function"!=typeof t.cachePath)throw new TypeError("Cannot store an object without cachePath method.");const s=t.cachePath(),i=await this.B6.get(s);if(null!=i)return void t.fromJSON(i);const r=await this.B7,n=await async function(t,e,s=!1){const i=await t.match(`${location.origin}${e}`);if(!i){const t=`Could not load object "${location.origin}${e}" from cache.`;if(s)throw new Error(t);return null}const r=await i.statusText;try{return K(r)}catch(t){const i=`Object at "${e}" is not in JSON format.`;if(s)throw new Error(i);return r}}(r,s,e);null!==n&&(t.fromJSON(n),await this.B6.set(s,n))}async loadAllWatched(){await this.loadAll(...this.B8)}async loadAll(...t){await Promise.all(t.map(t=>this.load(t)))}watch(...t){for(const e of t)this.B8.push(e),e.observe(()=>this.store(e))}}(te,caches,R),se=new bt(te),ie=new class{constructor(t){this.Bu=new Map,this.Bv=[],this.Bw=t}capture(t){t.url;const e=this.Bu.get(t.url)||[];e.push(t),this.Bu.set(t.url,e)}pop(t){const e=this.Bu.get(t);return e&&e.length?(1===e.length&&this.Bu.delete(t),e.shift()):null}addNotTracked(t){this.Bv.push(t)}removeNotTracked(t){const e=this.Bv.indexOf(t);-1!==e&&this.Bv.splice(e,1)}isNotTracked(t){return-1!==this.Bv.indexOf(t)}getUnknownNavigateMetadata(t){return new Zt(t,!1,!1,!0,!1,null,null,null,null,this.Bw.getSplitTestId(),this.Bw.getGroup())}}(se),re=new j,ne=new F(se),ae=new _,oe=new z,ce=new class{constructor(t){this.swCacheKeys=new WeakMap,this.Ad=t}async getSWCacheKey(t){if(this.swCacheKeys.has(t))return this.swCacheKeys.get(t);const{url:e}=t,s=await this.Ad.getQueryParameterStripConditions(t);for(const t of Array.from(e.searchParams.keys()))(this.Ad.shouldStripQueryParameter(t,s)||t===N)&&e.searchParams.delete(t);e.hash&&(e.hash=""),e.searchParams.sort();const i=e.toString();return this.swCacheKeys.set(t,i),i}}(se),he=new class{constructor(t,e,s,i,r){this.assetAPIKeys=new WeakMap,this.AL=t,this.AM=e,this.AN=s,this.AO=i,this.AP=r}async getAssetAPIKey(t){if(this.assetAPIKeys.has(t))return this.assetAPIKeys.get(t);const e=await this.AM.getSWCacheKey(t),s=new URL(e),i=await this.AL.getImageOptions(t),r=t=>{if(!1!==t)for(const e of p(t))if(s.searchParams.has(e)){s.searchParams.delete(e);break}};r(i.overrideWidth),r(i.overrideHeight);const n=s.toString();return this.assetAPIKeys.set(t,n),n}async createAssetAPIRequest(t){const e=await this.getAssetAPIKey(t);if(e.startsWith(this.AL.appURL))return new URL(e);const{originalRequest:s}=t,i=new URL(e),r=this.AL.getUserAgentClass(s);r&&"desktop"!==r&&i.searchParams.append("bqvariation",r);const n=this.AN.isFirstLoadHandled();n&&this.AN.firstLoadHandled(),await this.AI(t,i,n),await this.AJ(t,i);const a=new URL(`${this.AL.appURL}/asset/${i}`);return t.url,a}async AI(t,e,s){if(this.AL.sdnSetup)return void(t.isNavigateRequest()&&e.searchParams.append("bqpi","1"));const i=await t.getNavigateUrl();(s||this.AO.isNotTracked(i))&&(e.searchParams.append("bqpi","1"),this.AO.removeNotTracked(i))}async AJ(t,e){const{request:s}=t;if(s.destination,t.contentType!==n.Image)return;if(".svg"===r(e.pathname))return;const i=new URL(t.originalRequest.url).searchParams,a=function(t){const e=w(t);t.webp&&e.set("auto","webp"),100!==t.quality&&e.set("quality",`${t.quality}`),t.pjpeg&&t.pathname.match(/\.jpe?g$/i)&&e.set("format","pjpeg");const s=t.crop;if(s)if("string"==typeof s)e.set("crop",`${s},smart`);else if(s instanceof Array)if(s.length>=4){const[t,i,r,n]=s;e.set("crop",`${r},${n},x${t},y${i}`)}else if(s.length>=2){const[t,i]=s;e.set("crop",`${t},${i},smart`)}if(!1!==t.overrideWidth)for(const s of p(t.overrideWidth)){const i=t.searchParams.get(s);if(i&&!Number.isNaN(+i)){e.delete("height"),e.set("width",String(+i));break}}if(!1!==t.overrideHeight)for(const s of p(t.overrideHeight)){const i=t.searchParams.get(s);if(i&&!Number.isNaN(+i)){e.delete("width"),e.set("height",String(+i));break}}return[...e].map(t=>t.join("="))}(await this.AK(t,e.pathname,i));a.length&&(e.searchParams.append("bqoptimize","1"),e.search+=`;${a.join(";")}`)}async AK(t,e,s){const i=await this.AL.getImageOptions(t),{width:r,dpr:n}=this.AP,a=(o=t.headers.get("width")||void 0,c=(t=>parseInt(t,10)),null===o?null:void 0!==o?c(o):void 0);var o,c;return Object.assign({},i,{screenWidth:r,screenDPR:n,clientHintWidth:a,pathname:e,searchParams:s})}}(se,ce,oe,ie,ae),le=new class{constructor(t,e,s){this.X=t,this.Y=e,this.Z=s}async delete(){await async function(t){const e=(await caches.keys()).filter(t).map(t=>caches.delete(t));await Promise.all(e)}(t=>t.startsWith(R)&&t.endsWith(this.X.getClientRevision())),this.X.getClientRevision()}async loadResponse(t){const e=await this.U(t);return await caches.match(await this.Z.getSWCacheKey(t),{cacheName:e})}async storeResponse(t,e){const s=this.U(t),i=await this.Z.getSWCacheKey(t);await this.putIntoCache(s,i,e)}async putIntoCache(t,e,s){const i=await caches.open(t);this.X.getClientRevision();try{await i.put(e,s)}catch(t){t.message,await this.V(),await i.put(e,s)}}U(t){const e=this.Y.getUserAgentClass(t.originalRequest)||"assets";return`${R}-${e}-${this.X.getClientRevision()}`}async V(){const t=(await caches.keys()).filter(t=>new RegExp(`^${R}-.*`).test(t));(await Promise.all(t.map(async t=>{const e=await caches.open(t);return this.W(e,[n.Image])}))).reduce((t,e)=>t+e,0)>0||await Promise.all(t.map(async t=>{const e=await caches.open(t),s=Object.keys(n);return this.W(e,s)}))}async W(t,e){const s=(await t.keys()).filter(t=>{const s=a(t);return-1!==e.indexOf(s)});return s.length?(await Promise.all(s.map(e=>t.delete(e)))).filter(t=>t).length:0}}(ne,se,ce),ue=new class{constructor(t,e,s){this.loading=!1,this.disconnected=!1,this.shuttingDown=!1,this.reconnectAttempt=0,this.Aa=t,this.Ab=e,this.Ac=s}isDisconnected(){return this.disconnected}async purge(){this.Aa.purge(),await this.AW()}async initFromSWCache(){const t=await caches.open(R),e=this.AZ(),s=await caches.match(e,{cacheName:R});if(!s)return;const i=I(s)+this.Aa.getDrift()+this.Ab.refreshInterval,r=x(s.headers.get(O)),n=r.get("cachingId")||null,a=r.get("cacheKey")||S;await L(this.Aa,s,{maxAge:i,clientRevision:a,serverRevision:n}),await t.delete(e)}refreshCacheSketch(t=!1){return t||this.Aa.isExpired()?this.AW():Promise.resolve()}connect(){this.reconnectAttempt=0,this.disconnected=!1}async AV(){this.disconnected=!0,this.shuttingDown=!0,await registration.unregister()}disconnect(t=!0){if(this.disconnected=!0,!t||this.shuttingDown)return;const e=Math.min(this.Ab.reconnectInterval*Math.pow(5,this.reconnectAttempt),216e5);this.reconnectAttempt+=1,q(e).then(()=>this.AW())}async AW(){if(navigator.onLine&&!this.loading){this.loading=!0;try{await this.AX()}catch(t){this.disconnect()}finally{this.loading=!1}}}async AX(){const t=this.AY(),e=await fetch(t);if(e.status!==b.OK)return e.status===b.Forbidden?(e.status,this.AV()):(e.status,this.disconnect());e.clone();const s=x(e.headers.get(O));if("true"===s.get("disabled"))return this.disconnect();const i=this.Aa.getClientRevision(),r=s.get("cachingId")||null,n=this.Aa.getServerRevision(),a=(o=i,c=n,null===(h=r)||null===c?o:h===c?o:h);var o,c,h;a!==i&&await this.Ac.delete(),this.shuttingDown||(this.reconnectAttempt=0,this.disconnected=!1);const l=Date.now(),u=l+this.Ab.refreshInterval,d=l-I(e);await L(this.Aa,e,{maxAge:u,drift:d,serverRevision:r,clientRevision:a})}AY(){const e={[t]:"application/json"},s=new URL(this.AZ());return s.searchParams.append("BCB","1"),s.searchParams.append("skversion","1.18.0"),new Request(s.toString(),{headers:e})}AZ(){return`${this.Ab.appURL}/bloomfilter`}}(ne,se,le),de=new class{constructor(t,e,s,i){this.Af=t,this.Ag=e,this.Ah=s,this.Ai=i}async isResponseValid(t,e){const s=await this.Ai.getAssetAPIKey(t);return!this.Af.isResponseStale(s,t.contentType,e)&&!this.isCachedResponseExpired(e)&&this.Ae(t,e)}async canTakeFromCache(t){if(!navigator.onLine||t.isCritical())return!0;if(this.Af.isInvalid())return!1;if(t.isNavigateRequest()){if("reload"===t.request.cache)return t.request.cache,this.Ag.purge(),!1;"no-cache"===t.request.cache&&(t.request.cache,this.Ag.refreshCacheSketch(!0))}const e=!this.Af.isRequestStale(await this.Ai.getAssetAPIKey(t));return e}async trackRevalidation(t){this.Af.addToRevalidationWhitelist(await this.Ai.getAssetAPIKey(t))}isCachedResponseExpired(t){const e=D(t,this.Af.getDrift());if(null!==e)return e;const s=function(t){const e=t.headers.get("expires");return e?(Date.now(),Date.now()>Date.parse(e)):null}(t);return null!==s&&s}Ae(t,e){return!(e.url&&!c(t,this.Ah.relativeModuleImports)&&(e.url,t.url.toString(),e.url.includes("/v1/asset/")))}}(ne,ue,se,he),pe=new class{constructor(){this.requestHandlers=new Set}addHandler(t){this.requestHandlers.add(t)}fetch(t){try{const e=this.requestHandlers.values(),s=this.BB(t,e);return s instanceof Promise?s.catch(e=>(e.message,Dt(t))):s}catch(e){return e.message,Dt(t)}}BB(t,e){const{done:s,value:i}=e.next();return s?Dt(t):i.supportsHandling(t)?(i.constructor.name,i.handle(t,t=>(i.constructor.name,this.BB(t,e)))):this.BB(t,e)}},me=new class{constructor(t,e){this.Bs=t,this.Bt=e}async executeFor(t){const{navigation:e}=t,s=await this.Bs.getCriticalResources(t);let i=t;for(const r of s){const s={navigation:e,dependsOn:i,critical:!0},n=t.createSubRequest(r,s);t.waitUntil(Promise.resolve(this.Bt.fetch(n))),i=n}}}(se,pe),ge=new class extends kt{constructor(t,e,s){super(Et.INSTALLING),this.G=t,this.cookieStore=e,this.H=s,this.I=[],this.G.addEventListener("fetch",t=>this.D(t)),this.G.addEventListener("message",t=>t.waitUntil(this.E(t))),this.G.addEventListener("push",t=>this.A(t)),this.G.addEventListener("notificationclick",t=>this.B(t))}run(){this.transition(Et.RUNNING)}fail(){this.transition(Et.FAILED)}skipWaiting(){this.G.addEventListener("install",t=>t.waitUntil(this.G.skipWaiting()))}claimClients(){this.G.addEventListener("activate",t=>t.waitUntil(this.G.clients.claim()))}pushHandler(t){this.H.addHandler(t)}pushMessage(t){this.I.push(t)}A(t){if(!t.data)return;const e=t.data.json();if(e.isBaqend){const{title:s}=e;t.waitUntil(registration.showNotification(s,e))}}B(t){const{action:e,notification:s}=t;if(!s.data.isBaqend)return;const i=s.data.closeNotification;"close"!==e?(t.waitUntil(this.C(s.data.launchUrl)),i&&setTimeout(s.close.bind(s),1e4)):s.close()}async C(t){if(t)return clients.openWindow(t);const e=await clients.matchAll();return e.length>0?e[0].focus():clients.openWindow("/")}D(t){if(t.request.url,!this.F(t.request))return;const e=Bt.fromEvent(t,this.cookieStore.getCookies(location.origin));if(this.state!==Et.FAILED){if(this.state===Et.RUNNING){const s=this.H.fetch(e);return s instanceof Promise?t.respondWith(s.then(t=>t.response?(t.request,t.response):(t.request,t.request.fetchOriginal()))):s.response?(s.request,void t.respondWith(s.response)):void s.request}t.request.url,t.respondWith(this.waitUntil(Et.RUNNING,Et.FAILED).then(t=>t===Et.FAILED?e.fetchOriginal():Promise.resolve(this.H.fetch(e)).then(t=>t.response||t.request.fetchOriginal())))}else t.request.url}async E(t){await this.waitUntil(Et.RUNNING);const e=t.source;t.data;for(const s of this.I)if(await s.handle(e,t.data,t.ports?t.ports[0]:void 0))return;t.data}F(t){return function(t){return t.url.startsWith("http")}(t)?encodeURI(t.url).length>3800?(t.url,!1):"same-origin"!==t.mode||(t.url,!1):(t.url,!1)}}(self,re,pe);const fe=new class extends Mt{constructor(t,e,s,i){super(),this.isLastNavigateHandled=!1,this.ignoreNextNavigate=!1,this.loadEvents=0,this.BH=t,this.BI=e,this.BJ=s,this.BK=i}get handledLastNavigate(){return this.isLastNavigateHandled}get loadEventCount(){return this.loadEvents}trackLoadEvent(){this.loadEvents+=1}handle(t,e){if(this.loadEvents=0,this.BK.navigationPreload&&t.preloadResponse&&!this.BK.shouldCacheRequest(t))return async function(t){const e=t.preloadResponse;if(!e)throw new TypeError("The request needs to have a Navigation Preload response.");const s=await e;return s?(t.markAsFetched(),new Ct(qt.NAVIGATION_PRELOAD,t,Promise.resolve(s))):Dt(t)}(t).then(t=>this.BG(t));if(!t.modifying&&this.ignoreNextNavigate)return this.ignoreNextNavigate=!1,this.BG(Dt(t));this.ignoreNextNavigate=t.modifying;const s=e(t);return s instanceof Promise?s.then(t=>this.BG(t)):this.BG(s)}supportsHandling(t){return t.isNavigateRequest()}BG(t){const{request:e}=t;return this.isLastNavigateHandled=m(t.kind,qt.CACHE,qt.REROUTE,qt.PRELOAD,qt.BAQEND_API_REQUEST),this.isLastNavigateHandled,t.kind===qt.NAVIGATION_PRELOAD&&t.waitUntil(this.BH.executeFor(e)),t}}(me,ie,ue,se),we=new class extends Mt{constructor(t){super(),this.BQ=t,this.BR=null,this.BS=null}handle(t,e){if(!this.BQ.preloadDynamicBlocks)return t.waitUntil(this.BP(t)),e(t);const s=this.BN(t),i=this.BL(s),r=this.BL(e(t)),n=Promise.race([i,r]);this.BM(n);const a=Promise.all([i.then(()=>q(6e4)),r]);return t.waitUntil(a),n}supportsHandling(t){return t.isNavigateRequest()}popDynamicBlockResponse(){const t=this.BR;return t?(this.BR=null,t):null}wasOriginFasterOnNavigation(){return this.BS===qt.PRELOAD}async BL(t){const e=await t;return await e.response,e}async BM(t){const e=await t;this.BS=e.kind}async BN(t){return await q(0),this.BQ.navigationPreload&&t.preloadResponse?this.BR=t.preloadResponse.then(e=>e||this.BO(t)):this.BR=this.BO(t),Ht(t,this.BR)}BO(t){const e=t.createSubRequest(t.originalRequest.url,t.originalRequest);return Wt(e,this.BQ.sdnSetup,!0),e.fetch()}async BP(t){if(await this.BQ.shouldFetchOrigin(t.request)){await q(1e3*yt);try{if(!this.BQ.sdnSetup)return void await t.fetchOriginal();const e=t.createSubRequest(t.originalRequest.url,t.originalRequest);Wt(e,!0,!0),await e.fetch()}catch(t){t.stack}}}}(se),ve=new class{constructor(t,e,s){this.K=t,this.L=e,this.M=s}J(){return this.K.handledLastNavigate}lastNavigateFromOrigin(){return this.L.wasOriginFasterOnNavigation()||!this.J()&&!this.M.sdnSetup}popDynamicBlockResponse(){return this.L.popDynamicBlockResponse()}setDynamicBlockHeaders(t){Wt(t,this.J(),this.M.sdnSetup)}}(fe,we,se),Ae=new class extends Mt{constructor(t){super(),this.requestsInflightToPromiseMap=new Map,this.BC=t}async handle(t,e){const s=await this.BC.getSWCacheKey(t),i=this.requestsInflightToPromiseMap.get(s);if(i){const s=await i;return s.kind!==qt.CACHE||t.isCritical()?s.clone(t):e(t)}if(!t.isCritical())return e(t);const r=Promise.resolve(e(t));this.requestsInflightToPromiseMap.set(s,r);const n=await r;return n.kind===qt.CACHE&&this.requestsInflightToPromiseMap.delete(s),n}async removeFromInflightList(t){const e=await this.BC.getSWCacheKey(t);this.requestsInflightToPromiseMap.delete(e)}supportsHandling(t){return!0}}(ce),ye=new class extends Mt{constructor(t){super(),this.Bb=new Map,this.Ba=t}release(t){const e=this.Bb.get(t);e&&(e(),this.Bb.delete(t))}async handle(t,e){const s=t.navigation.clientId,i=this.Bb.get(s);return this.Ba.lastNavigateFromOrigin()?this.BZ(t):(i&&i(),t.url,new Promise(t=>{this.Bb.set(s,t)}).then(()=>this.BZ(t)))}supportsHandling(t){return t.url.pathname.endsWith("/speed-kit-dom-ready.js")}BZ(t){return Jt(t,"",{status:200,headers:{"content-type":"application/javascript","cache-control":"max-age:0, no-cache, no-store"}})}}(ve),be=new class extends Mt{constructor(t,e,s,i,r){super(),this.P=t,this.Q=e,this.R=s,this.S=i,this.T=r}handle(t,e){this.T.sdnSetup||this.P.addNotTracked(t.request.url);const s=e(t);return s instanceof Promise?s.then(t=>this.N(t)):this.N(s)}supportsHandling(t){return t.isNavigateRequest()}N(t){const e=!this.S.isDisconnected()&&this.T.isEnabledOnURL(t.request.url),s=e&&this.Q.handledLastNavigate;return t.waitUntil(this.O(t,e,s)),t}async O(t,e,s){const i=await t.response;this.P.capture(Zt.fromContext(t,e,s,this.R.lastNavigateFromOrigin(),this.T.getSplitTestId(),this.T.getGroup(),i))}}(ie,fe,ve,ue,se);ge.pushHandler(be),ge.pushHandler(fe),ge.pushHandler(ye),ge.pushHandler(new class extends Mt{handle(t,e){return t.url,t.method,Dt(t)}supportsHandling(t){return t.modifying}}),ge.pushHandler(new class extends Mt{constructor(t,e){super(),this.A_=t,this.BA=e}handle(t,e){const s=this.A_.sdnSetup;if(this.BA.lastNavigateFromOrigin())return Jt(t,null,{status:304,statusText:"Page was not served via Speed Kit"});t.url;const i=this.BA.popDynamicBlockResponse();return i?Ht(t,i):s?(this.BA.setDynamicBlockHeaders(t),Lt(t,t.fetch())):Dt(t)}supportsHandling(t){return"dynamic"===t.request.headers.get("baqend-speed-kit-request")}}(se,ve)),ge.pushHandler(new class extends Mt{constructor(t){super(),this.A$=t}handle(t,e){return t.url,Dt(t)}supportsHandling(t){return navigator.onLine&&this.A$.isDisconnected()}}(ue)),ge.pushHandler(new class extends Mt{constructor(t,e){super(),this.Av=t,this.Aw=e}handle(t,e){return t.url,t.isNavigateRequest()&&t.waitUntil(this.Av.executeFor(t)),Dt(t)}supportsHandling(t){return!t.prewarm&&!this.Aw.shouldCacheRequest(t)&&!this.Aw.shouldDelayRequest(t)}}(me,se)),ge.pushHandler(new class extends Mt{constructor(t,e){super(),this.BE=t,this.BF=e}async handle(t,e){t.mark(this.BE);const s=e(t);return t.waitUntil(Promise.resolve(s).then(async t=>{await t.response,t.request.mark(this.BF)})),s}supportsHandling(t){return!0}}("handleStart","handleEnd")),ge.pushHandler(new class extends Mt{constructor(t){super(),this.A8=t}handle(t,e){const{url:s}=t;return s.searchParams.get(N)?(s.searchParams.delete(N),t.url=s,Lt(t,t.fetch())):Promise.resolve().then(async()=>await this.A8.isEnabledOnSite(t)?this.A4(t,e):e(t))}supportsHandling(t){return this.A8.shouldDelayRequest(t)}async A4(t,e){return t.contentType===n.Script?this.A5(t):t.contentType===n.Image?this.A6(t):e(t)}A5(t){const e=t.url;e.searchParams.append(N,"1");const s=this.A8.getDelayOptions(t);return Jt(t,`(function(){\n  const thisNode = document.currentScript;\n  function loadScript() {\n    const scr = document.createElement('script');\n    for (let i = 0, len = thisNode.attributes.length; i < len; i++) {\n      var attr = thisNode.attributes.item(i);\n      scr.setAttribute(attr.nodeName, attr.nodeValue);\n    }\n    scr.async = true;\n    scr.src = '${e}';\n    thisNode.parentNode.replaceChild(scr, thisNode);\n  }\n  function delayAfter(cb) { ${s.event===vt.SPEED_KIT_DYNAMIC_LOADED?"\n      if (document.documentElement.classList.contains('speed-kit-dynamic-loaded')) {\n        return cb();\n      }\n      document.addEventListener('speed-kit-loaded', () => {\n        cb();\n      });":"\n      if (document.readyState === 'complete') {\n        return cb();\n      }\n      document.addEventListener('readystatechange', () => {\n        if (document.readyState === 'complete') {\n          cb();\n         }\n      });"} }\n  delayAfter(() => {\n    window.setTimeout(() => {\n      loadScript();\n    }, ${s.timeout});\n  });\n})();\n`,this.A7("application/javascript; charset=utf-8"))}A6(t){const e=Uint8Array.from([71,73,70,56,57,97,1,0,1,0,128,0,0,0,0,0,255,255,255,33,249,4,1,0,0,0,0,44,0,0,0,0,1,0,1,0,0,2,1,68,0,59]);return q(1e3).then(()=>t.fetchOriginal()).catch(console.error),Jt(t,e,this.A7("image/gif"))}A7(t){return{headers:{[i]:t}}}}(se)),ge.pushHandler(new class extends Mt{constructor(t){super(),this.A9=t}async handle(t,e){return await this.A9.isEnabledOnSite(t)?e(t):Dt(t)}supportsHandling(t){return!t.prewarm}}(se)),ge.pushHandler(new class extends Mt{constructor(t){super(),this.BD=t}handle(t,e){return t.url,t.waitUntil(this.BD.refreshCacheSketch()),e(t)}supportsHandling(t){return!0}}(ue)),ge.pushHandler(Ae),ge.pushHandler(we),ge.pushHandler(new class extends Mt{constructor(t,e,s,i){super(),this.BV=t,this.BW=e,this.BY=i,this.BX=s}async handle(t,e){const s=await this.BT(t);if(s)return s;t.url;const i=await e(t);if(!navigator.onLine&&i.kind===qt.ERROR){const e=await this.BT(t);if(e)return e}return this.BU(t,i)}supportsHandling(t){return!0}async BT(t){if(!await this.BW.canTakeFromCache(t))return null;t.mark("cacheStart");const e=await this.BV.loadResponse(t);return t.mark("cacheEnd"),e?(t.url,t.isCritical()?Ut(t,e):navigator.onLine?await this.BW.isResponseValid(t,e)?(t.url,Ut(t,e)):null:(t.url,Ut(t,e))):null}async BU(t,e){if(this.BY.cachingDisabled||!e.response)return t.url,await this.BX.removeFromInflightList(t),e;const s=e.response.then(s=>{if(e.kind===qt.BAQEND_API_REQUEST&&s.status<400)return this.BV.storeResponse(t,s.clone())}).then(()=>this.BW.trackRevalidation(t)).catch(e=>{t.url,e.message}).then(()=>this.BX.removeFromInflightList(t));return t.waitUntil(s),e}}(le,de,Ae,se)),ge.pushHandler(new class extends Mt{constructor(t,e,s){super(),this.A1=t,this.A2=e,this.A3=s}handle(t,e){return t.waitUntil(this.A0(t)),e(t)}supportsHandling(t){return t.isNavigateRequest()}async A0(t){if(!this.A3.hasCriticalResources())return;const e=await this.A2.loadResponse(t);e||await this.A1.executeFor(t)}}(me,le,se)),ge.pushHandler(new class extends Mt{constructor(t){super(),this.Ay=t;const[e,s]=k(navigator.userAgent);this.Az=!("Chrome"===e&&s<64||"Firefox"===e&&s<61)}async handle(t,e){const s=await this.Ax(t);return s?Ut(t,s):e(t)}supportsHandling(t){return this.Az&&t.isSameOrigin()&&!t.isNavigateRequest()}async Ax(t){const e=t.originalRequest.url;try{const t=await fetch(e,{mode:"same-origin",cache:"only-if-cached"});if(!this.Ay.isCachedResponseExpired(t))return t}catch(t){}return null}}(de)),ge.pushHandler(new class extends Mt{constructor(t,e,s){super(),this.As=t,this.At=e,this.Au=s}async handle(t){t.url=await this.Au.createAssetAPIRequest(t);const e=await this.An(t);return e.status===b.BaqendRedirect?this.Ao(t,e):e.status>=b.BadRequest?this.Ap(t,e):this.Ar(t,e)}supportsHandling(t){return!0}async An(t){try{return t.mode=this.Aq(t),t.cache="no-cache",t.url,t.request.cache,await t.fetch()}catch(t){const e=t instanceof TypeError?b.FetchTypeError:b.BadGateway;return new Response(t.message,{status:e})}}Ao(t,e){const s=tt(new URL(t.originalRequest.url),e.headers.get("location")),i=new Headers(e.headers);return i.set("location",s),Jt(t,null,{headers:i,status:b.MovedTemporarily,statusText:e.statusText},qt.BAQEND_API_REQUEST)}async Ap(t,e){if(t.isCritical())return Dt(t);if(e.status>=b.InternalServerError)try{const e=await t.fetchOriginal();return e.status>=b.InternalServerError?Dt(t,Promise.resolve(e)):(this.At.disconnect(),Dt(t,Promise.resolve(e)))}catch(e){return function(t,e){t.markAsFetched();const s=e instanceof TypeError?b.FetchTypeError:b.BadGateway;return new Ct(qt.ERROR,t,Promise.resolve(new Response(e.message,{status:s})))}(t,e)}return Dt(t)}Aq(t){return t.isSameOrigin()?"same-origin":t.request.headers.has("origin")||t.request.url.startsWith(this.As.appURL)?"cors":"no-cors"}Ar(t,e){return c(t,this.As.relativeModuleImports)?(t.url,Tt(t,e)):function(t,e={}){const{status:s,statusText:i,headers:r}=t,n=Object.assign({status:s,statusText:i,headers:r},e);if(!t.body)return Pt(t,n);try{return Promise.resolve(new Response(t.body,n))}catch(e){return Pt(t,n)}}(e).then(e=>(Object.defineProperty(e,"url",{value:t.originalRequest.url.toString()}),t.url,Tt(t,e)))}}(se,ue,he)),ge.pushMessage(new Gt(ie)),ge.pushMessage(new $t(ue)),ge.pushMessage(new jt(ue)),ge.pushMessage(new zt(ue)),ge.pushMessage(new Kt(se,le,ue,re,pe)),ge.pushMessage(new Qt(ue,fe,re)),ge.pushMessage(new Vt(ye)),ge.skipWaiting(),ge.claimClients(),ee.watch(se,re,ne,oe,ae),ee.loadAllWatched().then(async()=>{ne.isInitialized()||await ue.initFromSWCache(),se.preloadBloomFilter&&ue.refreshCacheSketch(),ge.run()}).catch(t=>{ge.fail()});